/*

......``````````````````````````````````````````````-:/++++++///////+shh/.```````````````````````````````````````````````````
.``````````````````````````````````````````````./shmNNNNNNNNNNNmNNmmmh+-.````````````````````````````````````````````````````
`.`````````````````````````````````````````.:odNMMMMMMMMMNNNNNNNNmNmmds+::/:--..`````````````````````````````````````````````
`````````````````````````````````````````-+dNMMMMMMMMMMNNNNNNNNNNNNmmNNNNNmmho:-..```````````````````````````````````````````
``````````````````````````````````````./yNMMMMMMMMMMMMMMMNNNNNNNNNmmmmmNNNNNNdho:..``````````````````````````````````````````
````````````````````````````````````./hNNMMMMMMMMMMMMMMMNNNNNNNNNNNmmmmmNNNNNNmho:--..```````````````````````````````````````
```````````````````````````````````-ydNNMMMMMMMMMMMMMMMMMNNNNmmmmNNmmmmmmmNNNNNmhs:-..```````````````````````````````````````
`````````````````````````````````-+dmNMMMMMMMMMMMNNNNNNNNNNNNNmmddmmmmmmmNmmmmmmmmhs/-.``````````````````````````````````````
```````````````````````````````-odNMMMMMNMMMMMNNNNNNmNmmmmmmmmmmmmmdmmdmdmmmdmmddmmmhyo:.````````````````````````````````````
`````````````````````````````.+dNNMMMNNNNNNMNNNNmmmmdmddddddmdddhhdmmmmdddmmmdmddddddhho:.```````````````````````````````````
```````````````````````````./hmNNMMNNNNNmNNNmmmmmdddddddhhddmmdhhhhhdddddddmmmdmddddddddh+..`````````````````````````````````
``````````````````````````-ymNNNNMNNNNmNhmmmdddddddddddddyhdddddhhyyhdhhddddmmmmmmddddddmds/.````````````````````````````````
`````````````````````````/dNNNmNNNNNmmmmymmmdhhdddhhdddddhyhdhhhhhysyhhhdddhmmmmNNmmmmdddmds:.```````````````````````````````
````````````````````````/mNNNNNNNmNNmmddhmmdddhdhdyhyymddhoshhhhhhhysoshhhhhhdmmmNmmNmmmddmms-```````````````````````````````
```````````````````````:mMNNNmNNNmmmmdddhdmmmdhdhysy+oddmds+sohhyhdhs+/+yysooyhhhmNmmNNmmmmmms.``````````````````````````````
``````````````````````-dMNNNNNNmmNmmmmhhhddmmmhhhs+s+/hyddyoo/+yyyhhy/--:+o/:/+ssshmmdmmmmNmmd+.`````````````````````````````
`````````````````````.hMMNNNNNNdmNdmNNddhddmmmdhhs/++:oshyyoo:-/ossss+-.`.::---:/++sdddmmddmNmh:`````````````````````````````
````````````````````.:dNMNNNNNmdmNmmNNddhdddmNmdho::+--sso+///..-:++/::-.`..--:--:::ohddmmdhdmmy-````````````````````````````
````````````````````.:sMMNNNmNmmNNNNNNdddddmmNmddo/-:-.os//:-:....-:/:-:////+++////:-/sdNmmddhmdo.```````````````````````````
`````````````````````-yMNNNNmNNNNNNNNNdhdddNNNdhdy+--:-:y+::-.-...-:/osyhhhhys+/::::---+mNNmmddds-.``````````````````````````
.`....```````````````./NNNNmmNNNMMMNNNmhhhmNNNdhhyo/:/::oo::--:::://+syyhhyo+//::::--..-+mNNmdhhs-.``````````````````````````
......```````````````.-mmmNmmNNNMMMNNmmhydNNNNNdddhhyssoos+/:::://+ossyys+/-..----:::-...+mNNmdhh/.``````````````````````````
......````````````````-hmmNmmmNMNNNNNdddhdmmNNNmmmmddhhyyysoo++++ossyyyso/:---:://///-..`.omNNmdhh/.`````````````````````````
...`..``....`````````..smmNmNmNNNNNmmhdddddddmdhysyyhhhhhhhyyysssssyyyyyysssyyyhyyo/:.````.omNmmddh/.````````````````````````
.`....```..`.`````````.oNNNNNNNNNNmhhyyhhhhhhyo/:::/+osyhhhhyys++++osyydddNmdyo/:-.```````.-ymNmmdmy-````````````````````````
...```````````````````.sNNNNNNNNNNmysssyyhhyysso+/:/+osyyyyyso:-..-:://++++++//:-.````````..:hNNmmdm+.```````````````````````
...`.`````````````````.+NNMMMNNNNNdso+osyhhhddddhddmmdhdhsooo/-````..`...-----.```   `````..-/dNmmhyh:```````````````````````
...```.```````````````./NNMMMMNNNNho//+osyhhhhhhyyyys+/:--::/:.` ```````````         `````..--ymmmm+s+.``````````````````````
...```.........```````.:mNNMMMMNNmho/::-----://+++o++/--...---.`   ``````````````````````...--+mmmmy:+:``````````````````````
.....`````...`````````./dNNMMMMMNNho/:--...````......`````..-..`    ``../+//::-............--:/hmmhh:-:.`````````````````````
....`...``....`..`````./yNNMMMMMNmho/:---..``````````````.:::-..`   `..`./yyyso+//:::------:::/ymm+//...`````````````````````
.......```...``..```.`.-yNNMMMMMMNho+//::-...`````````.-/so:::-..`````.```-hddhhysso++/////////ohh/.....`````````````````````
............`...........+mNNMMMMMNhso++//:--.........-/oyo-..-::::----::::/osyhddhhyyssooo+++///s+-.`````````````````````````
............`........`..:yMMMMMMMNdysso+//::----::::/+syhs+++oyyyysooshhhho::/osyhdhhyyssoo++///+-..`````````````````````````
..................``.`..-yNNNNMMMNdyyyysoo++////+++osyhyyhdddmmmmdddddhhho:--:/+osyyyyysso++////:.```````````````````````````
...............`........-/yydNMMMNdhhhyyyyssssssssyyhhsooshdmmmmdddhhyo+:-...:/++++oooooo++/////-.```````````````````````````
..............``.........::::dNMMNdhhhhhhhhhhyyyyyyyyo+++osyyyhhhyyso+/:::///oydhs+/////++/////+-````````````````````````````
............................-o+NMMdhhhhdddddhhhhhhyys+oooooosshhyyysosssssyyydNmhs+/:::://////+/.````````````````````````````
..............................-sNMNhhhhhddddhhhhyyyso+syhhhhddddddhhhyo+o:://s+:://:::::::///++:.````````````````````````````
...............................-hNMdhhhhhhhhhhhyysssoosdNNNmdyhsos+///..--.---...--:::::://++o+..````````````````````````...`
................................:yMNhhhhhhhhhhhyso+++++ssyddhyysos+::/--.``.--....---:////++oso..``````.````.````````.````...
................................-+NMNhddhhyyyyyyso+++///:/++o++/:--...``..-::-......--://++osho...```````.`.......`..........
.................................+NMMdydddhhyyyyysso++/::::/ooo++/:::/++oo+/::-.....--//++ossd+.......`````..................
.................................:yNNy:yddddhyyyyyyso+//::::+osyyyyyyyyyss+/:-..`...-:/+oossyo-..............................
................................../ddy:syhddddhhhhhhyso+/:::/+oyyyyyyysoo+:-..````..:/+osyys-................................
..................................-os+oosddmmmmddddhhyso+/::-:/+oooo+/::-..``````..-/ossyyyNs................................
...................................:/::/+MNmmmmmmmdddhhyso+/:-..----...````````..-:/syyhyssMNs...............................
......................................./yMMNdmmmmmmmddddhyso+/-................-:/oyyhhhyooNMNs-.............................
......................................+mMMMMNmmNNNmmmmmmmddhyso/:------::://///+oyhhhhhys++mMMNds:...........................
...................................-/hMMMMMMMNNNNNNNNmmmmmmmmdhhysoooooossyyyyyhhddhhhys++oNMMMNNmhyys+:-....................
...............................-/ohmMMMMMMMMMMMNNNNNNNNNmmmmmmmmmdddhhhhhdddddddddddhys+++sNMMMMNNNNNMMNmhs/-................
............................-:/dMMMMMMMMMMMMMMMMMNNNNNNNNNNNmmmmmmmmmmmmmmmddddddddhyo+++ohMMMMMMMMNNNMMNNdNmdhyhhhyo/.......
.....................-::-:ohdNNMMMMMMMMMMMMMMMMMMNNNNNNNNNNNNNNNmmmmmmmmmddddddddhhso+++oydMMMMMMMMMMMNMMNNmNNNNNNNMNNdyso/:-
................:::/ymmmmNMMmMMMMMMMMMMMMMMMMMMMMMNmmmmmNNNNNNNNNmmmmmmmmmmddddhhysoo+oosymMMMMMMMMMMMMNMMNdNNNNNNNMNNNNNNNNd
.............-/hmNNNNNMMMMMMNmMMMMMMMMMMMMMMMMMMMMMNmmdddmmmmmmmmmmmmmmmmmdddhhyyssoosssyhmMMMMMMMMMMMMNMMNNmMNNNNNNNNNMNNNNN
.........-:+shNNNNMMNMMMMMMMMmNMMMMMMMMMMMMMMMMMMMMMNmmdddddddddddmmddddddhhhyyyyyssssyyhdNMMMMMMMMMMMMNNMNMmNNNNNNNNNNNMNNNN
....:+osydmNNNNNNNNMMMMMMMMMMMmMMMMMMMMMMMMMMMMMMMMMMMNmmddddddddddddddddhhhhhhyyyyyyyyhhmNMMMMMMMMMMMMNNMNMMmMNNNNNNNNNMMNNN
.-/ymNNNNNNNNNNNNMNNMMMNMMMMMMMmMMMMMMMMMMMMMMMMMMMMMMMNNmmddddddddddddhhhhhhhhhyyyyyyyyydMNMMMMMMMMMMMMNNMNMmNNNNNNNNNNNMMMN
+hmNNNNNNNNNNNNNNNNNNNMMNNMMMMMMNMMMMMMMMMMMMMMMMMMMMMMMMNNmmddddhhhhhhhhhhhyyyyyyyyyssshNMMMMMMMMMMMMMMmNMNMNmNNNNNNNNNNNMMM
NNNNNNNNMMMNNNNNNNNMMNNNMNMMMMMMNNMMMMMMMMMMMMMMMMMMMMMMMMMNmmdddhhhhhyyyyyyyyyyyssoooohNMMMMMMMMMMMMMMNhNMMMMmNNNNNNNNNNNNMM
NNNNNNNNNNMMMNNNNNNNMMNNNMMNMMMMMNNMMMMMMMMMMMMMMMMMMMMMMMMMMMNmdhhyyyyyyyysssooo++++odMMMMMMMMMMMMMMMMNymNMMMNmNNNNNNNNNNNNN
NNNNNNNNNNNMMMNMMNNNNMMMNNNNNMMMMMNNMMMNMMMMMMMMMMMMMMMMMMMMMMMMMNmhyssssoooo+++++++omMMMMMMMMMMMMMMMMMNsdNMNMMdNNNNNNNNNNNNN
NNNNNNNNNNNNNMMNMMNNNNMMNNNNNNMNMMMmMMMNMMMMMMMMMMMMMMMMMMMMMNNMMMMMmhsssooo++++++++dMMMMMMMMMMMMMMMMMMMsdNMNMMmNNNNNNNNNNNNN
MNNNNNNNNNNNNNMMNNMMNMMNMNNNNNNNMMMMmMMNNNNMMMMMMMMMMMMMMMMMMMMMMMMMMMdsoo+++++///ohMMMMMMMMMMMMMMMMMMMMyhNMNMMNdNNNNNNNNNNNN
MMMMMNNNNNNNNNNMMNNNMMMMNNNNNNNNNMMMMNMMNNMMNNNMMMMMMMMMMMMMMMMMMMMMMMMNyo+++///smMMMMMMMMMMMMMMMMMMMMMMhhNNNMMNhNNNNNNNNNNNN
MMMMMMMMNNNNNNNNMMNNNMMMNNNNNNNNNNMMMNNMMNMNNMMMMNmMMMMMMMMMMMMMMMMMMMMMMdo////dMMMMMMMMMMMMMMMMMMMMMMMMhhNNMNMNdNNNNNNNNNNNN
MMMNNNNNMMMNNNNNNMMMNMNMNNNMMNNNNNNMMMNmMNMMMMMMMMNmNMMMMMMMMMMMMMMMMMMMMMMy:+mMMMMMMMMMMMMMMMMMMMMMMMMMmymNMNMMmmNNNNNNNNNNN
MMMMMMMNNNNMNNNNNNMMNNNMNNNMMNNNNNNNNMMNmMMMMNmmNMMmmNMMNMMMMMMMMMMMMMMMMMMMmMMMMMMMMMMMMMMMMMMMNNNNNNNNhydNMNMMNhNNNNNNNNNNN
MMMMMMMMMMNNNNNNNNNMMMNMMMNNMMMNNNNNNNMMNNMMMddyhmMMNmmNmMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMddddddhhhshmNMMMMhNNNNNNNNNNN
MMMMMMMMMMMMMMNNNNMMMMMMMMMMNNMMNNNNNNNMMmNMMMdhyhmMMNmmmNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMdhdddhhhsysmNMMMMdmNNNNNNNNNN
MMMMMMMMMMNNNMMMMNNMMMMMMMMMMMNMMMNNNNNNMMmNMMNhhyhdNMMmdNMMMMMMMMMMMMMMMMMMMMMMMMMMMMNMMMMMMMMNdddddyydyysdmNNMMNhNNNNNNNNNN
MMMMMMMMMNMMMNNMMMMMMMMMMMMMMMMMMMMMNNNNMMNmNMMNhhyhmNMNmdNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNNNdddhhyhhyydddNMMNhNNNNNNNNNN
MMMMMMMMMMMMMNNNNMMMMMMMMMMMMMMMMMMMMNNNNMMmNMMMdyhyddmMNmmNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNMNNNdhdhdhhhhdhdyNMMMNhNNNNNNNNN
MMMMMMMMMMNNNMMMMMMNMMMMMMMMMMMMMMMMMMNNNNMmNNMMNhhyyhdmNMNdMMMMMMMMMMNMMMMMMMMMMMMMMMMMMMMMNMNNNdddddhhdddyyhmMMMNhNNNNNNNNM
MMMMMMMMMMMNNNNNNNMMMMMMMMMMMMMMMMMMMMMNNNMNmNMMMdyhyhddmNMmNMMMMMMMMMMMMMMMMNNNMMMMMMMMMMMMmMMNNmddddhhdddoshdMMMMmdNNNNNMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNNNNMMmNMMMNshsyhddmNMNMMMMMNMMMMMMMMMMNdymMMMMMMMMMMMNNNNNNddhddhdhyyohhNMMMNhNNNMMMMM
MMMMMMMMMMMMMMNNNNNNMMMMMMMMMMMMMMMMMMMMMNMMmNNMMMyyyshdddmNMMMMNMMMMMMMMMMMMMNNNMMMMMMNMMMMNmNNNNhdhddddhyyssdNMMMMdNMNMMMMM
MMMMMMMMMMMMMMMNNNNNNMMMMMMMMMMMMMMMMMMMMNMMmNNMMMhsysyhddmmmMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMmNNNNddddmhhdhhssdmMMMMNdMMMMMMM
MMMMMMMMMMMMMMMMNNNNNNMMMMMMMMMMMMMMMMMMMMMMmNNMMMdohsyhddmmmNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMmNNNNNdddddhhhhyohdNMMMMdNMMMMMM
MMMMMMMMMMMMMMMNNNNNNNMMMMMMMMMMMMMMMMMMMMMMmNNMMMNohsyhdddmmmmNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNNNNNNddddddhhhyoydmMMMMdNMMMMMM
MMMMMMMMMMMMMMMMMNNNNMNMMMMMMMMMMMMMMMMMMMMMdNNNMMNshsshhdddmmmmMMMNNMMMMMMMMMMMMMMMMMMMMMMMMMNMNNNdddddhhdyhssdmMMMMmmMMMMMM
MMMMMMMMMMMMMMMMMMNNNNMMMMMMMMMMMMMMMMMMMMMMdNNMMMNsysshhdddmmmmMMMNmMMMMMMMMMMMMMMMMMMMMMMMMMNNNNNNmdmdhhhhhsoddMMMMNdMMMMMM
MMMMMMMMMMMMMMMMNNNNNNNNMMMMMMMMMMMMMMMMMMMMdMMMMMMyysshhddmdmmmNMMMdMMMMMMMMMMMMMMMMMMMMMMMMMNNMNNNddmdddhhhyohhNMMMMdMMMMMM
MMMMMMMMMMMMMMMMMMMMMNNMMMMMMMMMMMMMMMMMMMMMdMMMMMMyyysydddmdmmmmMMMmNMMMMMMMMMMMMMMMMMMMMMMMMMNMMNNdmdmddhdhhsyhmMMMMmNMMMMM
MMMMMMMMMMMMMMMMMMNMMMNMMMMMMMMMMMMMMMMMMMMMdMMMMMMhyysyhdddddmmmMMMMmMMMMMMMMMMMMMMMMMMMMMMMMMNNMNNmmmmmdhdhdsshdMMMMNmMMMMM
MMMMMMMMMMMMMMMMMMMMMMNNNMMMMMMMMMMMMMMMMMMMmMMMMMMhyhsyhddddmmmmMMMMNMMMMMMMMMMMMMMMMMMMMMMMMMMNMMMNddmmdhhdhyshyNMMMMmMMMMM
MMMMMMMMMMMMMMMMMMMNNNNMNMMMMMMMMMMMMMMMMMMMmMMMMMMhyhyyhddddmmmmNMMMNMMMMMMMMMMMMMMMMMMMMMMMMMMmMMMMdddmddhddhshhmMMMMmMMMMM
MMMMMMMMMMMMMMMMMMMNNNMMMMMMMMMMMMMMMMMMMMMMmNMMMMMhshyyhddmdmmmmmMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMmNMMMdddmmdddddyshdMMMMmNMMMM
MMMMMMMMMMMMMMMMMMNNNNNNNNMMMMMMMMMMMMMMMMMMNNMMMMMdsdsydhddddddmmMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMmNMMMmddddddmddyshhMMMMMmMMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNmMMMMMdydsydhddmdmdmmMMMMNMMMMMMMMMMMMMMMMMMMMMMMMMmNMMNNdddmmddmdhsdyNMMMMmMMMM
MMMMMMMMMMMMMMMMMMMMNNNNNNMMMMMMMMMMMMMMMMMMMmMMMMMmyhyyhdddddmmmmMMMMNMMMMMMMMMMMMMMMMMMMMMMMMMNNMMMMmmmNNmdddhshydMMMMNNMMM
MMMMMMMMMMMMMMMMMMMNNNNNNNMMMMMMMMMMMMMMMMMMNNMMMMMmyhyyhdddmdmmmmNMMMNMMMMMMMMMMMMMMMMMMMMMMMMMNNMMMMNNNmNmddmdyyhdMMMMNNMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNMMMMMmyhyyhddddmmmmmmMMMMNMMMMMMMMMMMMMMMMMMMMMMMMNNMMMMNmmmmmmmmdyyhhMMMMMNMMM
MMMMMMMMMMMMMMMMMMMMNNNNNMMMMMMMMMMMMMMMMMMMNNMMMMMmyhyyhdmmddNmmmmMMMMNMMMMMMMMMMMNNMMMMMMMMMMMNNMMMMNmmmmmmmddyyddMMMMMNMMM
MMMMMMMMMMMMMMMMMMMMMNNMMMMMMMMMMMMMMMMMMMMMMNMMMMMNhhhhdmmmdmNmmmmMMMMNMMMMMMMMMMMddNMMMMMMMMMMNNMMMMmmmmNmmmddhhddMMMMMNMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNMMMMMNddhhdmmmmmNNNmNMMMMNMMMMMMMMMMMMNMMMMMMMMMMMNNMMMMmmNmNNmmmmhdddMMMMMNMNy
MMMMMMMMMMMMMMMMMMMNNNNNNNNNMMMMMMMMMMMMMMMMMNMMMMMMddddmmNNmNNNNNNMMMMNMMMMMMMMMMMMMMMMMMMMMMMMNNMMMMNNNNNNNNNmdmmmMMMMMMNo-
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNMMMMMMmmmmmmNNNNNNNNNMNNNNNNMMMMMMMMMMMMMMMMMMMMMMNMMMMNNNNNNNNNNmmNmNMMMMMm+:-
MMMMMMMMMMMMMMMMNNNNNNNNNNMMMMMMMMMMMMMMMMMMMNNNmmmmdmmmNNNNNNMNMNhyyyhymmdNNMMdNMMMMMMMMMMMMMMMNMMMMNNNNNNNNNNNNNNMMMMMd/:--
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMds//:-----....--:/++ooddsyhdNNMNddddmNh+ooossssssyyyhhhhdmNNNNNNNNNNNNNNNMMMMNy/::--

*/

var pixelDiv = document.createElement('div');
pixelDiv.id = 'pixelDiv';
document.body.appendChild(pixelDiv);

var colorDiv = document.createElement("table");
colorDiv.className = "colorDiv";
pixelDiv.appendChild(colorDiv);

var rowsAndColumns = 20;
var previousRowsAndColumns = 0;
var previousGridCells = rowsAndColumns*rowsAndColumns;
var initialGrid = 0;
var grid = clickableGrid(rowsAndColumns);

pixelDiv.appendChild(grid);
var color = null;

function clickableGrid(number){
    var grid = document.createElement('table');
    grid.className = 'grid';
    for (var r=0;r<number;++r){
        var tr = grid.appendChild(document.createElement('tr'));
        for (var c=0;c<number;++c){
            var cell = tr.appendChild(document.createElement('td'));
            cell.innerHTML = '';
            cell.style.backgroundColor = 'white';
            cell.className = 'cells'
            cell.addEventListener('click', function(){
                if(color === null){
                this.style.backgroundColor = 'indianred';
            }else{
                this.style.backgroundColor = color;
            }
        }
        );
        }
    }
    return grid;
}

for (var i=0; i<9; i++) {
    var makeColorRow = document.createElement("tr");
    makeColorRow.className = "colorRow";
    colorDiv.appendChild(makeColorRow);
}
var colorRow = document.getElementsByClassName("colorRow");

for (var i=0; i<colorRow.length; i++) {
    for (var j=0; j<8; j++) {
        var makeColorSquare = document.createElement("td");
        makeColorSquare.className = "colorSquare";
        makeColorSquare.addEventListener("click", selectColor);
        colorRow[i].appendChild(makeColorSquare);
    }
}

var colorSquare = document.getElementsByClassName("colorSquare");
colorSquare[0].style.border = "1px solid yellow"

function selectColor() {
    for (var i=0; i<colorSquare.length; i++) {
        if (colorSquare[i].style.border === "1px solid yellow") {
            colorSquare[i].style.border = "";
        }
    }
    color = this.style.backgroundColor;
    console.log(color);
    this.style.border = "1px solid yellow";
}

var colorArr = ["indianred", "lightcoral", "salmon", "crimson", "red", "firebrick", "darkred", "maroon", "coral", "tomato", "orangered", "darkorange", "orange", "gold", "yellow", "sandybrown", "goldenrod", "darkgoldenrod", "khaki", "lime", "springgreen", "mediumseagreen", "seagreen", "forestgreen", "green", "darkgreen", "olivedrab", "lightseagreen", "darkcyan", "teal", "aqua", "turquoise", "mediumturquoise", "steelblue", "skyblue", "deepskyblue", "dodgerblue", "cornflowerblue", "blue", "mediumblue", "darkblue", "midnightblue", "darkslateblue", "slateblue", "indigo", "rebeccapurple", "purple", "darkorchid", "darkviolet", "blueviolet", "mediumorchid", "magenta", "orchid", "violet", "plum", "pink", "lightpink", "hotpink", "deeppink", "mediumvioletred", "burlywood", "tan", "rosybrown", "peru", "chocolate", "saddlebrown", "sienna", "brown", "black", "grey", "lightgrey", "white"];

for (var i=0; i<colorArr.length; i++) {
    colorSquare[i].style.backgroundColor = colorArr[i];
}

var clear = document.createElement('button');
clear.innerHTML = "Clear";
clear.id = 'clearButton';
colorDiv.appendChild(clear);

clear.addEventListener('click', makeGridEmpty)

function makeGridEmpty(){
    var allSquares = document.querySelectorAll('.cells');
    for(var i=0;i<allSquares.length;i++){
        allSquares[i].style.backgroundColor = "white";
    }
}

var erase = document.createElement('button');
erase.innerHTML = "Erase";
erase.id = 'eraseButton';
colorDiv.appendChild(erase);

erase.addEventListener('click', makeColorWhite)

function makeColorWhite(){
    for (var i=0; i<colorSquare.length; i++) {
        if (colorSquare[i].style.border === "1px solid yellow") {
            colorSquare[i].style.border = "";
        }
    }
    color = 'white';
    colorSquare[71].style.border = "1px solid yellow"
}

var save = document.createElement('button');
save.innerHTML = "Save";
save.id = 'saveButton';
colorDiv.appendChild(save);

save.addEventListener('click', saveGrid)

var saveObj;
function saveGrid(){
    saveObj = {};
    var allSquares = document.querySelectorAll('.cells');
    for(var i=0;i<allSquares.length;i++){
        if(allSquares[i].style.backgroundColor !== ''){
            saveObj[i]=allSquares[i].style.backgroundColor;
        }
    }
    console.log(saveObj);
    return saveObj
}

var load = document.createElement('button');
load.innerHTML = "Load";
load.id = 'loadButton';
colorDiv.appendChild(load);

load.addEventListener('click', loadGrid)

function loadGrid(){
    var allSquares = document.querySelectorAll('.cells');
    for(var i=0;i<allSquares.length;i++){
        if(saveObj[i] !== ''){
            allSquares[i].style.backgroundColor=saveObj[i];
        }
    }
}

var changeGrid = document.createElement('input');
changeGrid.placeholder = 10;
changeGrid.id = 'changeGridInput';
colorDiv.appendChild(changeGrid);

var changeGridButton = document.createElement('button');
changeGridButton.innerHTML = "Change Grid Layout";
changeGridButton.id = 'changeGridButton';
colorDiv.appendChild(changeGridButton);

changeGridButton.addEventListener('click', changeGridDisplay)

function changeGridDisplay(){
    var gridInputValue = document.getElementById('changeGridInput').value;
    if(gridInputValue > 0 && gridInputValue <99){
        if(confirm('Are you sure you want to change grid? Your work will not be saved.')) {
            grid.style.display = 'none';
            previousRowsAndColumns = rowsAndColumns;
            rowsAndColumns = gridInputValue;
            grid = clickableGrid(rowsAndColumns);
            pixelDiv.appendChild(grid);
            previousGridCells += rowsAndColumns*rowsAndColumns;
            initialGrid += previousRowsAndColumns*previousRowsAndColumns;
        } else {
            // Do nothing!
        }
    } else if(gridInputValue == 99){
        if(confirm('Are you sure you want to change grid? Your work will not be saved.')) {
            grid.style.display = 'none';
            previousRowsAndColumns = rowsAndColumns;
            rowsAndColumns = gridInputValue;
            grid = clickableGrid(rowsAndColumns);
            pixelDiv.appendChild(grid);
            convertImage(previousGridCells);
            previousGridCells += rowsAndColumns*rowsAndColumns;
            initialGrid += previousRowsAndColumns*previousRowsAndColumns;
        } else {
            // Do nothing!
        }
    } else {
        alert('Invalid entry')
    }
}


// var canvas = document.createElement("canvas");
// var ctx = canvas.getContext("2d");
// canvas.width  = 20;
// canvas.height = 20;
// document.body.appendChild(canvas);

// var redArr = [];
// var greenArr = [];
// var blueArr = [];
// var alphaArr = [];

// var logoImg = new Image();
// logoImg.onload = function () {
//     ctx.drawImage(logoImg, 0, 0);
//     var pixels = ctx.getImageData(0,0,canvas.width,canvas.height);
// // console.log(pixels);
//     var pixelArr = pixels.data;
// console.log(pixels.data);

//     for(var i=0;i<pixelArr.length;i+=4){
//         redArr.push(pixelArr[i+0]);
//         greenArr.push(pixelArr[i+1]);
//         blueArr.push(pixelArr[i+2]);
//         alphaArr.push(pixelArr[i+3]);


//     }

//     function doSomething(){
//     var allSquares = document.querySelectorAll('.cells');
//     for(var i=0;i<allSquares.length;i++){
//             allSquares[i].style.backgroundColor='rgb(' + redArr[i] + ',' + greenArr[i] + ',' + blueArr[i] + ',' + alphaArr[i] + ')';
//     }
// }
// }
// logoImg.src = "images/ok.png";


// Sean pic begin
// var canvas = document.createElement("canvas");
// var ctx = canvas.getContext("2d");
// canvas.width  = 100;
// canvas.height = 100;
// // document.body.appendChild(canvas);

// var redArr = [];
// var greenArr = [];
// var blueArr = [];
// var alphaArr = [];

// var logoImg = new Image();
// logoImg.onload = function () {
//     ctx.drawImage(logoImg, 0, 0);
//     var pixels = ctx.getImageData(0,0,canvas.width,canvas.height);
//     var pixelArr = pixels.data;

//     for(var i=0;i<pixelArr.length;i+=4){
//         redArr.push(pixelArr[i+0]);
//         greenArr.push(pixelArr[i+1]);
//         blueArr.push(pixelArr[i+2]);
//         alphaArr.push(pixelArr[i+3]);


//     }
// }

// logoImg.src = "images/test2.jpg";

// function convertImage(shift){
//     var allSquares = document.querySelectorAll('.cells');
//     for(var i=shift;i<allSquares.length;i++){
//         allSquares[i].style.backgroundColor='rgb(' + redArr[i-shift] + ',' + greenArr[i-shift] + ',' + blueArr[i-shift] + ',' + alphaArr[i-shift] + ')';
//     }
// }
// Sean pic End



var canvas = document.createElement("canvas");
var ctx = canvas.getContext("2d");
canvas.width  = 99;
canvas.height = 99;
// document.body.appendChild(canvas);

var redArr = [];
var greenArr = [];
var blueArr = [];
var alphaArr = [];

var logoImg = new Image();
logoImg.onload = function () {
    ctx.drawImage(logoImg, 0, 0);
    var pixels = ctx.getImageData(0,0,canvas.width,canvas.height);
    var pixelArr = pixels.data;

    for(var i=0;i<pixelArr.length;i+=4){
        redArr.push(pixelArr[i+0]);
        greenArr.push(pixelArr[i+1]);
        blueArr.push(pixelArr[i+2]);
        alphaArr.push(pixelArr[i+3]);


    }
}

logoImg.src = "images/bob.jpg";

function convertImage(shift){
    var allSquares = document.querySelectorAll('.cells');
    for(var i=shift;i<allSquares.length;i++){
        allSquares[i].style.backgroundColor='rgb(' + redArr[i-shift] + ',' + greenArr[i-shift] + ',' + blueArr[i-shift] + ',' + alphaArr[i-shift] + ')';
    }
}

/* REGISTER DOWNLOAD HANDLER */
/* Only convert the canvas to Data URL when the user clicks. 
   This saves RAM and CPU ressources in case this feature is not required. */
var downloadImagePixelArr = [];
var downloadImageArr = [];
function dlCanvas() {

    var allSquares = document.querySelectorAll('.cells');
    downloadImageArr = [];
    for(var i=initialGrid;i<allSquares.length;i++){
        downloadImagePixelArr.push(allSquares[i].style.backgroundColor); 
    }

    while(downloadImagePixelArr.length>0){
        var rowSegment = downloadImagePixelArr.splice(0,rowsAndColumns);
        downloadImageArr.push(rowSegment)
    }

    console.log(initialGrid);
    console.log(downloadImagePixelArr);
    console.log(downloadImageArr);
    
    var downloadCanvas = document.createElement("canvas"), // Select our canvas element
    ctx2 = downloadCanvas.getContext("2d"), // Save the context we're going to use
    width = downloadImageArr[0].length, // Get the width
    height = downloadImageArr.length, // Get the height
    scale = 10; // Scales the whole image by this amount

    downloadCanvas.width = width * scale; // Set the canvas width
    downloadCanvas.height = height * scale; // Set the canvas height
    downloadCanvas.id = 'downloadCanvas';

    // Loop through each color and draw that section
    for(var row = 0; row < height; row++) {
        for(var col = 0; col < width; col++) {
            ctx2.fillStyle = downloadImageArr[row][col]; // Set the color to the one specified
            ctx2.fillRect(col * scale, row * scale, scale, scale); // Actually draw the rectangle
        }
    }   

    // document.body.appendChild(downloadCanvas);

    var dt = downloadCanvas.toDataURL('image/png');
    /* Change MIME type to trick the browser to downlaod the file instead of displaying it */
    dt = dt.replace(/^data:image\/[^;]*/, 'data:application/octet-stream');

    /* In addition to <a>'s "download" attribute, you can define HTTP-style headers */
    dt = dt.replace(/^data:application\/octet-stream/, 'data:application/octet-stream;headers=Content-Disposition%3A%20attachment%3B%20filename=Canvas.png');

    this.href = dt;
};

var downloadButtonChild = document.createElement('button');
downloadButtonChild.innerHTML = 'Download Canvas';
downloadButtonChild.id = 'downloadImageButton';
var downloadButton = document.createElement('a');
downloadButton.download = "Canvas.png";
downloadButton.href = "#";
downloadButton.addEventListener('click', dlCanvas, false);
colorDiv.appendChild(downloadButton);
downloadButton.appendChild(downloadButtonChild);


